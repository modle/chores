{% extends 'base.html' %}
{% load markdown_deux_tags %}
{% load chores_extras %}
{% load staticfiles %}

{% block content %}
<div class="hero-unit">
    <h1>{{ user.username|title }}'s Chores</h1>
    {% for s in score %}
        <span style="color:green">{{ s.current_score }}</span>
    {% endfor %}
</div>

{% for message in messages %}
    {% if message.tags == 'info' %}
        <p style="color:red; font-weight:bold; font-size:3em;">{{ message }}</p><br>
        <p><img src="{% static 'bootstrap/img/blueman.png' %}"></p>
    {% else %}
        <p style="font-weight:bold;">{{ message }}</p>
    {% endif %}
{% endfor %}

<div class="container-fluid">
    <button type="button" class="btn" data-toggle="collapse" data-target=".newpost-collapse">&#x25B2;&#x25BC;</button>
    <br><br>
    <div class="newpost-collapse collapse">
        <form method="POST" action="">
            {% csrf_token %}
            {{ form }}
            <p>
                <input class="btn" type="submit" value="Submit &raquo;" id="submit"/>
            </p>
        </form>
    </div>
</div>

<hr noshade>
{% for chore in chores %}
{% if chore.last_completed_date|overdue:chore.frequency_in_days >= 0 %}
    <div class="row-fluid">
        <div class="span12">
            <!--name and priority-->
            <p>
                {% if chore.priority = 3 %}
                    <span style="color:red; font-weight:bold">{{ chore.title }}</span>
                {% elif chore.priority = 2 %}
                    <span style="color:#FFB90F; font-weight:bold">{{ chore.title }}</span>
                {% else %}
                    <span style="color:green; font-weight:bold">{{ chore.title }}</span>
                {% endif %}

                - {% if chore.category %}{{ chore.category }}{% else %}No Category{% endif %}
            </p>

            <!--last completed-->
            {% if chore.last_completed_date|overdue:chore.frequency_in_days != 999 %}
                <p>
                    &#x2714; <span class="user-plaque">   <!--check mark-->
                    {{ chore.last_completed_by.username|upper|slice:":2" }}</span>
                    -
                    <span class="small-caps-header">{{ chore.last_completed_date|date:"D" }},
                        {{ chore.last_completed_date|date }}</span>
                </p>
            {% endif %}

            <!--due date status-->
            <p>
                {% if chore.last_completed_date|overdue:chore.frequency_in_days = 999 %}
                    <img src="{% static 'bootstrap/img/alarm_grey.png' %}" height="10em" width="10m">    <!--alarm-->
                {% elif chore.last_completed_date|overdue:chore.frequency_in_days = 0 %}
                    <img src="{% static 'bootstrap/img/alarm_yellow.png' %}" height="10em" width="10em">    <!--alarm-->
                {% else %}
                    <img src="{% static 'bootstrap/img/alarm_red.png' %}" height="10em" width="10em">    <!--alarm-->
                    <span class="small-caps-header">
                        {{ chore.last_completed_date|overdue:chore.frequency_in_days }}
                    </span>
                {% endif %}
                <img src="{% static 'bootstrap/img/repeat.png' %}" height="15em" width="15em">
                <span class="small-caps-header">{{ chore.frequency_in_days }}</span>
            </p>

            <!--buttons-->
            <p><a class="btn" href="{% url 'mark_chore_done' chore.slug %}">&#x2714;</a></p>
            <hr>
        </div><!--/span-->
    </div><!--/row-->
{% endif %}
{% endfor %}

{% endblock %}

{% block navsidebar %}
{% endblock %}
